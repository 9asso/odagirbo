# App Icon Configuration Guide

## Overview
The app icon system allows you to configure your app's icon through the `config.json` file and automatically generate platform-specific icons.

## Configuration

### 1. Config File Setup
In `assets/config.json`, set your icon path:
```json
{
  "app": {
    "title": "YourAppName",
    "icon": "assets/pack/appicon.png"
  }
}
```

### 2. Icon Requirements
- **Format**: PNG format recommended
- **Size**: At least 1024x1024 pixels
- **Location**: Place your icon in `assets/pack/` folder
- **Naming**: Use the name specified in config (e.g., `appicon.png`)

## Platform Support

### Web (Fully Supported)
The icon configuration automatically generates:
- `Icon-192.png` - Standard web icon
- `Icon-512.png` - Large web icon
- `Icon-maskable-192.png` - Maskable icon for PWA
- `Icon-maskable-512.png` - Large maskable icon for PWA
- Updates to `manifest.json` with app title and theme colors
- Updates to `index.html` with app title and meta tags

### Android/iOS (Manual Setup Required)
For native Android and iOS apps, you'll need to:
1. Enable platform support in `pubspec.yaml`
2. Create the platform folders (`flutter create . --platforms=android,ios`)
3. Update `flutter_launcher_icons` config to include those platforms

## Usage

### Automatic Update Script
Run this script whenever you change the icon or app title in config:
```bash
./update_app_icon.sh
```

The script will:
1. Generate all platform icons from your config icon
2. Update web manifest with app title
3. Update HTML meta tags
4. Apply theme colors

### Manual Update
If you prefer manual updates:
```bash
# 1. Generate icons
dart run flutter_launcher_icons

# 2. Update web manifest and index.html manually
# Edit web/manifest.json and web/index.html with your app title
```

## Dashboard Integration

Your dashboard can update app icons by:

### 1. Update Config File
```javascript
// Read config
const config = JSON.parse(fs.readFileSync('assets/config.json'));

// Update icon path and title
config.app.icon = 'assets/pack/newicon.png';
config.app.title = 'New App Name';

// Save config
fs.writeFileSync('assets/config.json', JSON.stringify(config, null, 2));
```

### 2. Upload New Icon
```javascript
// Upload new icon file to assets/pack/
await uploadFile(iconFile, 'assets/pack/appicon.png');
```

### 3. Regenerate Icons
```javascript
// Execute the update script
exec('./update_app_icon.sh', (error, stdout, stderr) => {
  if (error) {
    console.error('Failed to update icons:', error);
    return;
  }
  console.log('Icons updated successfully!');
});
```

### 4. Alternative: Node.js Direct Execution
```javascript
const { execSync } = require('child_process');

try {
  // Generate icons
  execSync('dart run flutter_launcher_icons', { 
    cwd: '/path/to/project',
    stdio: 'inherit' 
  });
  
  // Update manifest with new title
  const manifest = JSON.parse(fs.readFileSync('web/manifest.json'));
  manifest.name = newAppTitle;
  manifest.short_name = newAppTitle;
  fs.writeFileSync('web/manifest.json', JSON.stringify(manifest, null, 2));
  
  // Update index.html
  let html = fs.readFileSync('web/index.html', 'utf8');
  html = html.replace(/<title>.*<\/title>/, `<title>${newAppTitle}</title>`);
  fs.writeFileSync('web/index.html', html);
  
  console.log('✅ Icons and title updated!');
} catch (error) {
  console.error('❌ Update failed:', error);
}
```

## Current Configuration

### Files Modified
- ✅ `pubspec.yaml` - Added flutter_launcher_icons package
- ✅ `web/icons/` - Generated platform icons (4 sizes)
- ✅ `web/manifest.json` - Updated with "LoveMoney" title and theme colors
- ✅ `web/index.html` - Updated with "LoveMoney" title and meta tags

### Generated Icons
Located in `web/icons/`:
- `Icon-192.png` - 192x192 standard icon
- `Icon-512.png` - 512x512 standard icon  
- `Icon-maskable-192.png` - 192x192 maskable icon
- `Icon-maskable-512.png` - 512x512 maskable icon

## Testing

### Web Browser
```bash
flutter run -d chrome
```
- Check browser tab icon (favicon)
- Check page title in browser tab
- Install as PWA and check home screen icon

### Mobile Web
```bash
flutter run -d web-server --web-port=8080
```
- Visit on mobile browser
- Add to home screen
- Check home screen icon and title

## Troubleshooting

### Icon Not Updating
1. Clear browser cache (Cmd+Shift+R on Mac, Ctrl+Shift+R on Windows)
2. Rebuild the app: `flutter clean && flutter run -d chrome`
3. Check that icon file exists at the path specified in config
4. Verify icon is at least 512x512 pixels

### Title Not Changing
1. Verify config.json has correct title
2. Run `./update_app_icon.sh` script
3. Check web/manifest.json and web/index.html were updated
4. Rebuild the app

### Script Permission Denied
```bash
chmod +x update_app_icon.sh
```

## Notes

- The `icon` property in config.json is primarily for **in-app display** and **icon generation source**
- The actual launcher icon is generated by `flutter_launcher_icons` package
- Web icons are automatically referenced in manifest.json
- For Android/iOS, icons are placed in platform-specific directories
- Changes require app rebuild to take effect

## Future Enhancements

Potential additions for dashboard control:
- [ ] API endpoint to upload and regenerate icons
- [ ] Real-time preview of icon changes
- [ ] Multiple icon variants (light/dark theme)
- [ ] Automated icon optimization
- [ ] A/B testing different icons
